{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/Project_3_group4-best-group-btw-/src/chessboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport Chess from \"chess.js\"; // import Chess from  \"chess.js\"(default) if recieving an error about new Chess() not being a constructor\n\nimport Chessboard from \"chessboardjsx\";\nimport './chessboard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BlindChess({\n  user_data,\n  socket,\n  user_name\n}) {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [gameFen, setFen] = useState(\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\");\n  const [history, setHistory] = useState([]);\n  /*function onClickButton() {\n    if (inputRef != null && inputRef.current.value != \"\") {\n      const userName = inputRef.current.value;\n      setUsername(prev => userName);\n    }\n  }\n  */\n\n  console.log(\"Username\", user_name);\n  console.log(\"userData\", user_data);\n  useEffect(() => {\n    socket.on(\"move\", data => {\n      setFen(data.FEN);\n      setHistory(data.history);\n    });\n  }, []); // Image options\n\n  const factor = 0.75;\n  var WhiteImage = \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/apple/48/face-with-tears-of-joy_1f602.png\";\n  var BlackImage = \"http://cdn.shopify.com/s/files/1/1061/1924/products/Loudly_Crying_Face_Emoji_grande.png?v=1571606037\";\n\n  const optionWhite = ({\n    squareWidth,\n    isDragging\n  }) => /*#__PURE__*/_jsxDEV(\"img\", {\n    style: {\n      width: isDragging ? squareWidth * factor : squareWidth,\n      height: isDragging ? squareWidth * factor : squareWidth\n    },\n    src: WhiteImage,\n    alt: \"whitepieces\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 11\n  }, this);\n\n  const optionBlack = ({\n    squareWidth,\n    isDragging\n  }) => /*#__PURE__*/_jsxDEV(\"img\", {\n    style: {\n      width: isDragging ? squareWidth * factor : squareWidth,\n      height: isDragging ? squareWidth * factor : squareWidth\n    },\n    src: BlackImage,\n    alt: \"blackpieces\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 11\n  }, this);\n\n  const onDrop = ({\n    sourceSquare,\n    targetSquare\n  }) => {\n    if (sourceSquare === targetSquare) {\n      return;\n    }\n\n    console.log(sourceSquare, targetSquare);\n    const game = new Chess(gameFen); // see if the move is legal\n\n    let move = game.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: \"q\" // always promote to a queen for example simplicity\n\n    }); // illegal move\n\n    if (move === null) {\n      //alert(\"You lose due to illegal move\");\n      console.log(\"illegal move\");\n      return;\n    }\n\n    ; //console.log(game.pgn().replace(\"[SetUp \\\"1\\\"]\" , \"\").replace(/\\s*\\[.*?\\]\\s*/g, ''));\n\n    let move_string = game.pgn().replace(\"[SetUp \\\"1\\\"]\", \"\").replace(/\\s*\\[.*?\\]\\s*/g, '');\n\n    if (move_string.includes(\"...\")) {\n      //console.log(move_string.split(\"...\")[1]);\n      move_string = move_string.split(\"...\")[1];\n    } else {\n      //console.log(move_string);\n      move_string = move_string.split('. ')[1];\n    }\n\n    const newFen = game.fen();\n    const newHistory = history.concat(move_string);\n    const data = {\n      FEN: newFen,\n      history: newHistory\n    };\n    socket.emit('move', data); //console.log(\"New History\", newHistory);\n\n    setFen(prev => newFen);\n    setHistory(prev => newHistory);\n  };\n\n  function chessInfo() {\n    const game = new Chess(gameFen); //console.log(game);\n    // console.log(user_data);\n    //console.log(\"history\", history);\n\n    let temp_history = history;\n    let list_moves = Array(0);\n\n    for (var i = 0; i < temp_history.length; i += 2) {\n      list_moves.push([temp_history[i], temp_history[i + 1]]);\n    } //console.log(\"list_moves\", list_moves);\n\n\n    console.log(game.in_checkmate());\n    let GameInfo = \"\";\n    const turn = game.fen() === \"start\" || game.fen().search(/w/) !== -1 ? \"White\" : \"Black\";\n\n    if (game.in_checkmate()) {\n      if (turn == \"Black\") {\n        GameInfo = \"White won by checkmate\";\n      } else {\n        GameInfo = \"Black won by checkmate\";\n      }\n    } else if (game.in_draw() || game.in_stalemate() || game.in_threefold_repetition()) {\n      GameInfo = \"Draw by stalemate\";\n    } else if (game.insufficient_material()) {\n      GameInfo = \"Draw by insufficient material\";\n    } else {\n      GameInfo = turn + \" to Play\";\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chessInfo\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\" \", GameInfo, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        children: [\" \", list_moves.map(move => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: move\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 38\n        }, this)), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this);\n  }\n\n  function resign() {\n    if (Chess(gameFen).game_over()) {\n      return;\n    }\n\n    if (user_name == \"White\") {\n      setFen(\"rnb1kbnr/pppp1ppp/8/4p3/5PPq/8/PPPPP2P/RNBQKBNR w KQkq - 1 3\");\n      const data = {\n        FEN: \"rnb1kbnr/pppp1ppp/8/4p3/5PPq/8/PPPPP2P/RNBQKBNR w KQkq - 1 3\",\n        history: []\n      };\n      socket.emit('move', data);\n    } else if (user_name == \"Black\") {\n      setFen(\"rnbqkbnr/ppppp2p/8/5ppQ/4P3/P7/1PPP1PPP/RNB1KBNR b KQkq - 1 3\");\n      const data = {\n        FEN: \"rnbqkbnr/ppppp2p/8/5ppQ/4P3/P7/1PPP1PPP/RNB1KBNR b KQkq - 1 3\",\n        history: []\n      };\n      socket.emit('move', data);\n    } else {\n      return;\n    }\n  }\n\n  function replay() {\n    setFen(\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\");\n    setHistory([]);\n    const data = {\n      FEN: \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\",\n      history: []\n    };\n    socket.emit('move', data);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Chessboard, {\n      id: \"chessBoard\",\n      width: 640,\n      position: gameFen,\n      onDrop: onDrop,\n      boardStyle: {\n        borderRadius: \"5px\",\n        boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\n      },\n      pieces: {\n        wK: optionWhite,\n        wQ: optionWhite,\n        wN: optionWhite,\n        wR: optionWhite,\n        wB: optionWhite,\n        wP: optionWhite,\n        bK: optionBlack,\n        bQ: optionBlack,\n        bN: optionBlack,\n        bR: optionBlack,\n        bB: optionBlack,\n        bP: optionBlack\n      },\n      orientation: user_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }, this), chessInfo(), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => resign(),\n      children: \"Resign \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }, this), Chess(gameFen).in_checkmate() ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => replay(),\n      children: \"Play Again\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 38\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 5\n    }, this), \"Playing as \", user_name]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 11\n  }, this);\n}\n\n_s(BlindChess, \"PCyi/r4i4OiYdhlD8xwbT/dgIDE=\");\n\n_c = BlindChess;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlindChess\");","map":{"version":3,"sources":["/home/ec2-user/environment/Project_3_group4-best-group-btw-/src/chessboard.js"],"names":["React","useState","useRef","useEffect","Chess","Chessboard","BlindChess","user_data","socket","user_name","username","setUsername","gameFen","setFen","history","setHistory","console","log","on","data","FEN","factor","WhiteImage","BlackImage","optionWhite","squareWidth","isDragging","width","height","optionBlack","onDrop","sourceSquare","targetSquare","game","move","from","to","promotion","move_string","pgn","replace","includes","split","newFen","fen","newHistory","concat","emit","prev","chessInfo","temp_history","list_moves","Array","i","length","push","in_checkmate","GameInfo","turn","search","in_draw","in_stalemate","in_threefold_repetition","insufficient_material","map","resign","game_over","replay","borderRadius","boxShadow","wK","wQ","wN","wR","wB","wP","bK","bQ","bN","bR","bB","bP"],"mappings":"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","sourcesContent":["import React, { useState,  useRef, useEffect } from \"react\";\nimport Chess  from \"chess.js\"; // import Chess from  \"chess.js\"(default) if recieving an error about new Chess() not being a constructor\nimport Chessboard from \"chessboardjsx\";\nimport './chessboard.css';\n\nexport default function BlindChess({user_data, socket, user_name}) {\n  const [username, setUsername] = useState(\"\");\n  const [gameFen, setFen] = useState(\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\");\n  const [history, setHistory] = useState([]);\n\n\n  /*function onClickButton() {\n    if (inputRef != null && inputRef.current.value != \"\") {\n      const userName = inputRef.current.value;\n      setUsername(prev => userName);\n    }\n  }\n  */\n  \n  console.log(\"Username\", user_name);\n  console.log(\"userData\", user_data);\n  \n  useEffect(() => {\n    socket.on(\"move\", (data) => {\n      \n      setFen(data.FEN);\n      setHistory(data.history);\n    });\n  }, []);\n  // Image options\n  const factor = 0.75;\n  var WhiteImage = \"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/160/apple/48/face-with-tears-of-joy_1f602.png\";\n  var BlackImage = \"http://cdn.shopify.com/s/files/1/1061/1924/products/Loudly_Crying_Face_Emoji_grande.png?v=1571606037\";\n  const optionWhite = ({ squareWidth, isDragging }) => (\n          <img\n            style={{\n              width: isDragging ? squareWidth * factor : squareWidth,\n              height: isDragging ? squareWidth * factor : squareWidth\n            }}\n            src={WhiteImage}\n            alt={\"whitepieces\"}\n          />\n        )\n        \n  const optionBlack =  ({ squareWidth, isDragging }) => (\n          <img\n            style={{\n              width: isDragging ? squareWidth * factor : squareWidth,\n              height: isDragging ? squareWidth * factor : squareWidth\n            }}\n            src={BlackImage}\n            alt={\"blackpieces\"}\n          />\n        )\n\n  const onDrop = ({ sourceSquare, targetSquare }) => {\n    if (sourceSquare === targetSquare) {\n      return;\n    }\n    \n    console.log(sourceSquare, targetSquare);\n    const game = new Chess(gameFen);\n    // see if the move is legal\n    let move = game.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: \"q\" // always promote to a queen for example simplicity\n    });\n    // illegal move\n    if (move === null) {\n      //alert(\"You lose due to illegal move\");\n      console.log(\"illegal move\");\n      return;\n    };\n    \n    \n    \n    //console.log(game.pgn().replace(\"[SetUp \\\"1\\\"]\" , \"\").replace(/\\s*\\[.*?\\]\\s*/g, ''));\n    let move_string = game.pgn().replace(\"[SetUp \\\"1\\\"]\" , \"\").replace(/\\s*\\[.*?\\]\\s*/g, '');\n    \n    if (move_string.includes(\"...\")) {\n      //console.log(move_string.split(\"...\")[1]);\n     move_string= move_string.split(\"...\")[1];\n    }\n    else {\n      //console.log(move_string);\n      move_string = move_string.split('. ')[1];\n    }\n    \n    const newFen = game.fen();\n    const newHistory = history.concat(move_string);\n        \n    const data = { FEN: newFen, history: newHistory};\n    \n    socket.emit('move', data);\n    \n    \n    //console.log(\"New History\", newHistory);\n    setFen((prev) => newFen);\n    setHistory(prev => newHistory);\n  };\n\n\n  function chessInfo() {\n    const game = new Chess(gameFen);\n    //console.log(game);\n    // console.log(user_data);\n    //console.log(\"history\", history);\n    let temp_history = history;\n    \n    let list_moves = Array(0);\n    for (var i =0; i< temp_history.length; i+=2) {\n      list_moves.push([temp_history[i], temp_history[i+1]]);\n    }\n    \n    \n    //console.log(\"list_moves\", list_moves);\n    console.log(game.in_checkmate());\n    let GameInfo = \"\";\n    const turn = game.fen() === \"start\" || game.fen().search(/w/) !== -1 ? \"White\": \"Black\";\n    \n    if (game.in_checkmate()) {\n      if (turn == \"Black\") {\n        GameInfo=\"White won by checkmate\";\n      }\n      else {\n        GameInfo=\"Black won by checkmate\";\n      }\n    }\n    else if (game.in_draw() || game.in_stalemate() || game.in_threefold_repetition()) {\n      GameInfo=\"Draw by stalemate\";\n    }\n    else if (game.insufficient_material()) {\n      GameInfo=\"Draw by insufficient material\";\n    }\n    else {\n      GameInfo=turn + \" to Play\";\n    }\n    return (<div className=\"chessInfo\">\n      <h1> {GameInfo} </h1>\n      <ol> {list_moves.map((move) => <li>{move}</li>)} </ol>\n      \n      </div>\n    )\n  }\n  \n  function resign() {\n    if (Chess(gameFen).game_over()) {\n      return;\n    }\n    \n    \n    if (user_name == \"White\") {\n      setFen(\"rnb1kbnr/pppp1ppp/8/4p3/5PPq/8/PPPPP2P/RNBQKBNR w KQkq - 1 3\");\n      const data = { FEN: \"rnb1kbnr/pppp1ppp/8/4p3/5PPq/8/PPPPP2P/RNBQKBNR w KQkq - 1 3\" , history: []};\n      socket.emit('move', data);\n    }\n    else if (user_name == \"Black\") {\n      setFen(\"rnbqkbnr/ppppp2p/8/5ppQ/4P3/P7/1PPP1PPP/RNB1KBNR b KQkq - 1 3\");\n      const data = { FEN: \"rnbqkbnr/ppppp2p/8/5ppQ/4P3/P7/1PPP1PPP/RNB1KBNR b KQkq - 1 3\" , history: []};\n     socket.emit('move', data);\n    }\n    else {\n      return;\n    }\n  }\n  \n  function replay() {\n    setFen(\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\");\n    setHistory([]); \n    const data = { FEN: \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\" , history: []};\n    socket.emit('move', data);\n  }\n  \n  return (<div>\n    <Chessboard\n      id=\"chessBoard\"\n      width={640}\n      position={gameFen}\n      onDrop={onDrop}\n      boardStyle={{\n        borderRadius: \"5px\",\n        boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\n      }}\n      pieces={{\n        wK: optionWhite,\n        wQ: optionWhite,\n        wN: optionWhite,\n        wR: optionWhite,\n        wB: optionWhite,\n        wP: optionWhite,\n        bK: optionBlack,\n        bQ: optionBlack,\n        bN: optionBlack,\n        bR: optionBlack,\n        bB: optionBlack,\n        bP: optionBlack\n      }}\n      orientation={user_name}\n    />\n    \n    {chessInfo()}\n    <button onClick={() => resign()}>Resign </button>\n    {Chess(gameFen).in_checkmate() ? <button onClick={() => replay()}>Play Again</button> : \"\"}\n    \n    <br/>\n    Playing as {user_name}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}